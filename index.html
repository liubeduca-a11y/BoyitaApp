<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Boyita Tracker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <nav class="tab-bar">
            <button onclick="mostrarSeccion('registro')">ğŸ“ Registro</button>
            <button onclick="mostrarSeccion('dashboard')">ğŸ“Š Resumen</button>
        </nav>

        <div id="seccion-registro">
            <header>
                <h1>ğŸ¼ Boyita Tracker</h1>
                <p id="fecha-actual"></p>
            </header>

            <div class="card">
                <h3>Leche</h3>
                <div class="btn-group">
                    <button onclick="setOz(1)">1 oz</button>
                    <button onclick="setOz(1.5)">1.5 oz</button>
                    <button onclick="setOz(2)">2 oz</button>
                </div>
                <input type="number" id="onzas" placeholder="O cantidad manual...">
                <input type="text" id="notaLeche" placeholder="Nota (ej: tomÃ³ con sueÃ±o)">
                <button onclick="guardarAlimento()" class="btn-main">Guardar Toma</button>
            </div>

            <div class="card">
                <h3>PaÃ±ales</h3>
                <select id="tipoPaÃ±al" onchange="cambiarVistaPaÃ±al()" class="full-select">
                    <option value="pipi">Pipi ğŸ’¦</option>
                    <option value="popo">Popo ğŸ’©</option>
                </select>
                
                <div id="opcionPipi">
                    <p>Nivel de llenado:</p>
                    <input type="range" id="nivelPipi" min="1" max="3" step="1" class="slider">
                    <div class="range-labels"><span>Poco</span><span>Medio</span><span>Lleno</span></div>
                </div>

                <div id="opcionPopo" style="display:none;">
                    <p>Textura:</p>
                    <input type="range" id="texturaPopo" min="1" max="4" step="1" class="slider">
                    <div class="range-labels"><span>LÃ­q.</span><span>Past.</span><span>Dura</span><span>Sangre</span></div>
                </div>
                <input type="text" id="notaPaÃ±al" placeholder="Nota (ej: muy irritado)">
                <button onclick="guardarPaÃ±al()" class="btn-main">Guardar PaÃ±al</button>
            </div>

            <div class="card">
                <h3>SueÃ±o</h3>
                <div id="controles-sueno">
                    <button id="btn-sueno" onclick="toggleSueno()" class="btn-main" style="background-color: #4a5568;">EmpezÃ³ a dormir ğŸŒ™</button>
                </div>
                <div id="detalle-despertar" style="display:none; margin-top:10px;">
                <input type="text" id="notaSueno" placeholder="Nota (ej: ruidos en la calle)">
                <button id="btn-sueno" onclick="toggleSueno()" ...
                    <p>Â¿CÃ³mo despertÃ³ / Notas?</p>
                    <select id="estadoDespertar" class="full-select">
                        <option value="Tranquila">Tranquila ğŸ˜Š</option>
                        <option value="Llorando">Llorando ğŸ˜¢</option>
                        <option value="Movimientos Raros">Movimientos Raros ğŸ˜°</option>
                        <option value="Silvidos">Silvidos ğŸŒ¬ï¸</option>
                        <option value="RespiraciÃ³n Acelerada">RespiraciÃ³n Acelerada ğŸ’¨</option>
                    </select>
                </div>
            </div>

            <h3>Historial</h3>
            <div id="listaRegistros"></div>
            <button onclick="descargarCSV()" class="btn-main" style="background-color: #10b981; margin-top: 20px;">
    ğŸ“¥ Descargar Historial (Excel/CSV)
</button>
            <button onclick="resetearApp()" class="btn-reset">Borrar todo y empezar de cero</button>
        </div>

        <div id="seccion-dashboard" style="display:none;">
    <header>
        <h2>ğŸ“Š Resumen de Boyita</h2>
    </header>

    <div class="period-selector">
        <button onclick="cambiarPeriodo(24)" id="btn-24h" class="active-period">24h</button>
        <button onclick="cambiarPeriodo(168)" id="btn-168h">7 DÃ­as</button>
        <button onclick="cambiarPeriodo(720)" id="btn-720h">1 Mes</button>
    </div>

    <div class="card bottle-card">
        <h3>Consumo de Leche</h3>
        <div class="bottle">
            <div id="bottle-filler" class="water"></div>
        </div>
        <p id="total-onzas-texto" class="stat-highlight">0 oz</p>
        <p id="subtitulo-periodo">En las Ãºltimas 24 horas</p>
    </div>

    <div class="stats-grid">
        <div class="card stat-card">
            <span class="emoji">ğŸ§·</span>
            <div class="stat-val" id="stat-panales">0</div>
            <div class="stat-label">PaÃ±ales</div>
        </div>
        <div class="card stat-card">
            <span class="emoji">ğŸ˜´</span>
            <div class="stat-val" id="stat-sueno">0h</div>
            <div class="stat-label">SueÃ±o Total</div>
        </div>
    </div>

    <div class="card">
        <canvas id="graficaLeche"></canvas>
    </div>
</div>
